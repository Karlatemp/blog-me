<!DOCTYPE html>
<html lang="zh_cn">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://karlatemp.github.io/blog/assets/images/favicon.png" type="image/png" />
    <title>0.index</title>

    <!--Begin  Page Level  CSS -->
    <link href="https://karlatemp.github.io/blog/assets/plugins/morris-chart/morris.css" rel="stylesheet" />
    <link href="https://karlatemp.github.io/blog/assets/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
    <!--End  Page Level  CSS -->
    <link href="https://karlatemp.github.io/blog/assets/css/icons.css" rel="stylesheet">
    <link href="https://karlatemp.github.io/blog/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://karlatemp.github.io/blog/assets/css/style.css" rel="stylesheet" />
    <link href="https://karlatemp.github.io/blog/assets/css/responsive.css" rel="stylesheet">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="js/html5shiv.min.js"></script>
          <script src="js/respond.min.js"></script>
    <![endif]-->

</head>

<body class="sticky-header">


    <!--Start left side Menu-->
    <div class="left-side sticky-left-side">

        <!--logo-->
        <div class="logo">
            <a href="index.html"><img src="https://karlatemp.github.io/blog/assets/images/logo.png" alt=""></a>
        </div>

        <div class="logo-icon text-center">
            <a href="index.html"><img src="https://karlatemp.github.io/blog/assets/images/logo-icon.png" alt=""></a>
        </div>
        <!--logo-->

        <div class="left-side-inner">
            <!--Sidebar nav-->
            <ul class="nav nav-pills nav-stacked custom-nav"><li class="menu-list nav-active"><a href="javascript:void(0)"><i class="icon-layers"></i><span>reflect</span></a>
<ul class="sub-menu-list">
<li class="active"><a href="/blog-me/reflect/0.index.html">0.index</a></li>
<li><a href="/blog-me/reflect/1.module.html">1.module</a></li>
<li><a href="/blog-me/reflect/2.proxy.html">2.proxy</a></li>
<li><a href="/blog-me/reflect/3.root.html">3.root</a></li>

</ul></li>
<li class="menu-list"><a href="javascript:void(0)"><i class="icon-layers"></i><span>index</span></a>
<ul class="sub-menu-list">
<li><a href="/blog-me/index.html">index</a></li>

</ul></li>
<li class="menu-list"><a href="javascript:void(0)"><i class="icon-layers"></i><span>open-mirai</span></a>
<ul class="sub-menu-list">
<li><a href="/blog-me/open-mirai/0.startup.html">0.startup</a></li>
<li><a href="/blog-me/open-mirai/1.new project.html">1.new project</a></li>
<li><a href="/blog-me/open-mirai/2.setup-bot.html">2.setup-bot</a></li>
<li><a href="/blog-me/open-mirai/3.message.html">3.message</a></li>
<li><a href="/blog-me/open-mirai/4.mirai-console.html">4.mirai-console</a></li>

</ul></li>
<li class="menu-list"><a href="javascript:void(0)"><i class="icon-layers"></i><span>blog</span></a>
<ul class="sub-menu-list">
<li><a href="/blog-me/blog/0.Hello.html">0.Hello</a></li>
<li><a href="/blog-me/blog/1.2020-08-24.html">1.2020-08-24</a></li>

</ul></li>
</ul>
            <!--End sidebar nav-->

        </div>
    </div>
    <!--End left side menu-->


    <!-- main content start-->
    <div class="main-content">

        <!-- header section start-->
        <div class="header-section">

            <a class="toggle-btn"><i class="fa fa-bars"></i></a>

            <!--notification menu start -->
            <!--notification menu end -->

        </div>
        <!-- header section end-->


        <!--body wrapper start-->
        <div class="wrapper">

            <!--Start Page Title-->
            <div class="page-title-box"><h4 class="page-title">0.index</h4><ol class="breadcrumb">
<li><a href="javascript:void(0)">reflect</a></li>
<li class="active"><a href="javascript:void(0)">0.index</a></li>
</ol><div class="clearfix"></div></div>
            <!--End Page Title-->


            <!--Start row-->
            <div class="row">


                <!-- Start inbox widget-->
                <div class="col-md-12">
                    <div class="white-box"><h1 id="反射越权"><a href="#反射越权" id="反射越权">反射越权</a></h1>
<p>这里呢, 讲的反射, 并不是常用的反射, 而是一种更加猛的东西, <a href="https://github.com/Karlatemp/UnsafeAccessor">UnsafeAccessor</a></p>
<p>我会在这里说出他的实现原理, 以及如何做到绝对越权.</p>
<p>通过 UnsafeAccessor, 我们能干, 一切能干的事情, Unsafe, 基本相当于 JVM 的 ROOT. 用得好封神, 用不好, 那就爆炸.</p>
<p>这篇文章, 将会讲述, 如何在不触发任何JVM警告的情况下, 获得 JVM 的 ROOT.</p>
<p>此篇文章不会触发以下任何警告.</p>
<pre><code>WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by .... (...) to ....
WARNING: Please consider reporting this to the maintainers of code.Code
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
</code></pre>
<pre><code>java.lang.IllegalAccessError: class .... (in unnamed module @0xb4c966a) cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module @0xb4c966a
</code></pre>
<p>完成越权所必须的权限:</p>
<pre><code>(&quot;java.lang.RuntimePermission&quot; &quot;createClassLoader&quot;)
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessSystemModules&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.access&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessDeclaredMembers&quot;)
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)
(&quot;java.util.PropertyPermission&quot; &quot;jdk.proxy.debug&quot; &quot;read&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.access&quot;)
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.access&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.module&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.sun.nio.ch&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.sun.reflect.annotation&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.reflect&quot;)
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;getClassLoader&quot;)
(&quot;java.util.PropertyPermission&quot; &quot;jdk.proxy.ProxyGenerator.saveGeneratedFiles&quot; &quot;read&quot;)
(&quot;java.lang.reflect.ReflectPermission&quot; &quot;suppressAccessChecks&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.access&quot;)
(&quot;java.lang.RuntimePermission&quot; &quot;accessClassInPackage.jdk.internal.misc&quot;)
</code></pre>
<p>我们不探讨 Java8 或者更低版本, 因为 Java8 或者更低版本<strong>没有模块权限控制</strong>, 也<strong>不会输出警告</strong>, 没有任何必要需要在此处探讨.</p>
</div>
                </div>
                <!-- Start inbox widget-->
            </div>
            <!--End row-->

        </div>
        <!-- End Wrapper-->


        <!--Start  Footer -->
        <footer class="footer-main">Copyright &copy; Karlatemp 2020. All rights reserved.</footer>
        <!--End footer -->

    </div>
    <!--End main content -->



    <!--Begin core plugin -->
    <script src="https://karlatemp.github.io/blog/assets/js/jquery.min.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/js/bootstrap.min.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/plugins/moment/moment.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/js/jquery.slimscroll.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/js/jquery.nicescroll.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/js/functions.js"></script>
    <!-- End core plugin -->

    <!--Begin Page Level Plugin-->
    <script src="https://karlatemp.github.io/blog/assets/plugins/morris-chart/morris.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/plugins/morris-chart/raphael-min.js"></script>
    <script src="https://karlatemp.github.io/blog/assets/plugins/jquery-sparkline/jquery.sparkline.min.js"></script>
    <!-- <script src="assets/pages/dashboard.js" th:src="@{${prefix}}"></script> -->
    <!--End Page Level Plugin-->


</body>

</html>